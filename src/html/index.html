<!-- cargo watch -q -c -w src/ -x run  -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="icon" href="/favicon_png" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FOSSO Dashboard</title>
    <link rel="stylesheet" type="text/css" href="./style.css">
    <link rel="icon" type="image/png" href="/favicon_png">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Lato:wght@900&family=Open+Sans&display=swap');

        ::-webkit-scrollbar {
            display: none;
        }


        * {
            -ms-overflow-style: none;  
            scrollbar-width: none; 
        }

        body {
            font-family: 'Open Sans', sans-serif;
                }
                
        .white-boxes-container {
          transform: translateY(-5px);
          position: relative; /* Should put sponsor bar behind the buttons */
    z-index: 1; /* Should put sponsor bar behind the buttons */
        }

        .button {
    position: relative; /* Should put sponsor bar behind the buttons */
    z-index: 2; /* Should put sponsor bar behind the buttons */
}



    </style>
    <script src="./htmx.min.js"></script>
    <script>
        async function ping() {
            let start = performance.now();
            await fetch('/ping', { method: 'HEAD' });
            let end = performance.now();
            let pingTime = end - start;
            document.getElementById('ping').textContent = `Ping: ${pingTime.toFixed()}ms`;
        }
        setInterval(ping, 2000);
    </script>
    <div hx-put="/show_quarter_css" hx-trigger="every 10ms"></div>
    <div hx-put="/sponsor_roll_css" hx-trigger="every 10ms"></div>
    <div hx-put="/countdown_css" hx-trigger="every 10ms"></div>
</head>
<body>
    <header>
        <ul>
            <li><a href="#" class="active4">Dashboard</a></li>
            <li><a href="/overlay" target="_blank">Overlay</a></li>
            <li><a href="/teaminfo">Team Info</a></li>
        </ul>
    </header>

<!-- Home Score Content -->
    <div class="score-container">
        <div class="home">
            <div hx-put="/hdisp" hx-trigger="every 10ms"></div>
            <button hx-post="/hu" hx-swap="none">+</button>
            <p>Points:</p>
            <div hx-put="/hp" hx-trigger="every 10ms"></div>
            <button hx-post="/hd" hx-swap="none">-</button><br><br>
            <button hx-post="/hu" hx-swap="none">1 Point</button>
            <button hx-post="/hu2" hx-swap="none">2 Points</button>
            <button hx-post="/hu3" hx-swap="none">3 Points</button>
        </div>
<!-- Timer & Countdown Content -->
        <div class="timer-container">
            <div class="timer">
                <div class="quick-timer-buttons">
                    <button hx-post="/qt8" hx-swap="none">8 Min</button>
                    <button hx-post="/qt5" hx-swap="none">5 Min</button>
                    <button hx-post="/qt3" hx-swap="none">3 Min</button>
                    <button hx-post="/qt1" hx-swap="none">1 Min</button>
                </div>
        

                <div class="timer-elements">
                    <div hx-put="/time_dashboard" hx-trigger="every 10ms"></div>
                </div>
        
                <div class="timer-controls">
                    <button id="startButton" hx-post="/tstart" hx-swap="none" hx-trigger="click" class="timer-button">Start</button>
                    <button id="stopButton" hx-post="/tstop" hx-swap="none" hx-trigger="click" class="timer-button">Stop</button>
                </div>
                <div class="timer-controls">
                    <button hx-post="/mins_up" hx-swap="none" class="timer-button min-button">Min+</button>
                    <button hx-post="/mins_down" hx-swap="none" class="timer-button min-minus-button">Min-</button>
                </div>
                <div class="timer-controls">
                    <button hx-post="/secs_up" hx-swap="none" class="timer-button min-button">Sec+</button>
                    <button hx-post="/secs_down" hx-swap="none" class="timer-button min-minus-button">Sec-</button>
                </div>
        
                <div class="countdown-elements">
                    <div class="countdown_mins-elements">
                        <div hx-put="/countdown_mins" hx-trigger="every 10ms"></div>
                        <div class="countdown_secs-elements">
                            <div hx-put="/countdown_secs" hx-trigger="every 10ms"></div>
                        </div>
                    </div>
                </div>
        
                
                <div class="countdown">
                    <div class="quick-countdown-buttons">
                        <button hx-post="/qtc20" hx-swap="none">20 Min</button>
                        <button hx-post="/qtc15" hx-swap="none">15 Min</button>
                        <button hx-post="/qtc10" hx-swap="none">10 Min</button>
                        <button hx-post="/qtc5" hx-swap="none">05 Min </button>
                    </div>
                    
                    <div class="countdown-elements">
                        <div hx-put="/countdown_dashboard" hx-trigger="every 10ms"></div>
                    <div hx-put="/countdown_time_mins" hx-trigger="every 10ms"></div>
                    <div hx-put="/countdown_time_secs" hx-trigger="every 10ms"></div>
                    <div class="countdown-controls">
                        <button id="cdstartButton" hx-post="/start_countdown" hx-swap="none" hx-trigger="click" class="start_countdown">Start</button>
                        <button id="cdstopButton" hx-post="/stop_countdown" hx-swap="none" hx-trigger="click" class="stop">Stop</button>
                    </div>
                    <div class="countdown-controls">
                        <button hx-post="/countdown_mins_up" hx-swap="none" class="timer-button min-button">Min+</button>
                        <button hx-post="/countdown_mins_down" hx-swap="none" class="timer-button min-minus-button">Min-</button>
                    </div>
                    <div class="countdown-controls">
                        <button hx-post="/countdown_secs_up" hx-swap="none" class="countdown-button min-button">Sec+</button>
                        <button hx-post="/countdown_secs_down" hx-swap="none" class="countdown-button min-minus-button">Sec-</button>
                    </div>
                    <form id="countdown-form" hx-post="/update_countdown_title" class="countdown-title" hx-swap="none">
                        <label for="title">Countdown title:</label>
                        <input type="text" id="title" name="title">
                        <input type="submit" value="Submit" id="countdown-submit">
                    </form>
                </div>
            </div>
        </div>
    </div>
        
<!-- Away Score Content -->

        <div class="away">
            <div hx-put="/adisp" hx-trigger="every 10ms"></div>
            <button hx-post="/au" hx-swap="none">+</button>
            <p>Points:</p>
            <div hx-put="/ap" hx-trigger="every 10ms"></div>
            <button hx-post="/ad" hx-swap="none">-</button><br><br>
            <button hx-post="/au" hx-swap="none">Add 1 Point</button>
            <button hx-post="/au2" hx-swap="none">Add 2 Points</button>
            <button hx-post="/au3" hx-swap="none">Add 3 Points</button>
        </div>
    </div>

<!-- Overlay Bar Preview -->

 <div class="white-boxes-container">
        <div class="home-box">
            <img class="logo" src="/home_png" alt="Home Team Logo" height="28px" width="auto"> 
            <div class="team-name" hx-put="/hname_score" hx-trigger="every 10ms"></div>
        </div>
        
        <div class="score-box" hx-put="/score" hx-trigger="every 10ms"></div>
        
        <div class="away-box">
            <img class="logo" src="/away_png" alt="Away Team Logo" height="28px" width="auto"> 
            <div class="team-name" hx-put="/aname_score" hx-trigger="every 10ms"></div>
        </div>
        
        <div class="clock-box">
            <div hx-put="/time_and_quarter" hx-trigger="every 10ms"></div>
        </div>
    </div>

<!--Quarter Content -->

    <div class="quarter-container">
        <button id="show-quarter" hx-post="show_quarter" hx-swap="none">Show quarter</button>
        <button id="quarter1" hx-post="/q1" hx-swap="none">Quarter 1</button>
        <button id="quarter2" hx-post="/q2" hx-swap="none">Quarter 2</button>
        <button id="quarter3" hx-post="/q3" hx-swap="none">Quarter 3</button>
        <button id="quarter4" hx-post="/q4" hx-swap="none">Quarter 4</button>
    </div>

<!-- Extra Button Content -->

    <div class="extra-buttons"></div>
    <button id="show-countdown" hx-post="show_countdown" hx-swap="none">Show countdown</button>
    <button id="show-sponsor" hx-post="show_sponsor_roll" hx-swap="none">Show sponsors</button>  <!-- Sponsor to impliment in the future -->
    </div>
    
   <!-- <div class="extra-buttons">
        <div id="show_logs" class="logs">
            <button hx-post="show_logs" hx-swap="none">Show logs</button>
            <div id="logs" hx-get="/logs" hx-trigger="show_logs"></div>
        </div>  --> <!-- Planned: Show logs, needs backend -->
    <p id="ping">Ping: calculating...</p>

<!-- Javascript -->

    <script>
        htmx.on('#startButton', 'htmx:afterRequest', function() {
            document.getElementById('startButton').classList.add('selected');
            document.getElementById('stopButton').classList.remove('selected');
        });

        htmx.on('#stopButton', 'htmx:afterRequest', function() {
            document.getElementById('stopButton').classList.add('selected');
            document.getElementById('startButton').classList.remove('selected');
        });    
        var quarters = document.querySelectorAll('.quarter-container button');

        function removeActiveClass() {
            quarters.forEach(function(quarter) {
                quarter.classList.remove('active');
            });
        }
        quarters.forEach(function(quarter) {
    quarter.addEventListener('click', function() {
        removeActiveClass();
        this.classList.add('active');
        document.getElementById('show_quarter').classList.remove('active');
    });
});
    </script>
</body>
</html>