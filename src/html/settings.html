<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1,user-scalable=0" />
    <title>Settings</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://use.typekit.net/ikl4cbb.css"
        integrity="sha256-YMTXWpyoCVCn1xAOzL7zotWxPMmVYvdtVgwKCSfSYdA=" crossorigin="anonymous">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="SAMEORIGIN">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    <meta http-equiv="Referrer-Policy" content="no-referrer">
    <script src="/htmx.js"></script>
    <link rel="icon" href="/favicon.png">
</head>

<body id="settings-body">
    <nav>
        <button class="hamburger-menu" onclick="toggle_menu()">
            <span class="line"></span>
            <span class="line"></span>
            <span class="line"></span>
        </button>
        <ul class="sidenavbar">
            <li><a href="/">Dashboard</a></li>
            <li><a href="/teaminfo">Sponsors & Teaminfo</a></li>
            <li><a href="/overlay" target="_blank" rel="noopener noreferrer">Overlay</a></li>
            <li><a href="/settings" class="nav-active">Settings</a></li>
        </ul>
    </nav>
    <div class="settings-container">
        <div class="settings-box">
            <div class="settings-title">
                <h2>Overlay background color</h2>
                <div class="subtext-settings">
                    <h6>Optionally, you can change the chromakey color on the overlay page.</h6>
                </div>
            </div>
            <div class="setting">
                <input type="color" id="overlay-color" value="#00b140">
                <button id="reset-color">Reset to Default</button>
            </div>
        </div>
        <div class="settings-box">
            <div class="settings-title">
                <h2>Host IP</h2>
                <div class="subtext-settings">
                    <h6>When accessing from a separate device, this will need to be set to calculate ping and show
                        the
                        preview.</h6>
                </div>
            </div>
            <div class="setting">
                <input type="text" id="host-ip" name="host-ip" placeholder="X.X.X.X:3000" oninput="sanitize(this)">
            </div>
        </div>
        <div class="settings-box">
            <div class="settings-title">
                <h2>Theme</h2>
                <div class="subtext-settings">
                    <h6>Changing themes can be helpful in different scenarios, and for those who benefit from WCAG
                        AAA.
                    </h6>
                </div>
            </div>
            <div class="setting">
                <button id="light-theme">Light Theme</button>
                <button id="dark-theme">Dark Theme</button>
                <button id="colorblind-theme">Colorblind Theme</button>
            </div>
        </div>
        <div class="settings-box">
            <h2>OCR</h2>
        </div>
        <div class="settings-box">
            <div class="settings-title">
                <h2>Reset Scoreboard</h2>
                <div class="subtext-settings">
                </div>
            </div>
            <div class="setting">
                <button class="reset-button">⚠️Reset⚠️</button>
            </div>
        </div>
        <div class="settings-box-indev">
            <div class="settings-title">
                <h2>Keybinds</h2>
                <div class="subtext-settings">
                    <h6>Customizable keybinds make it a breeze to keep score without a touchscreen.</h6>
                </div>
            </div>
            <div class="setting">
                <input type="text" id="keybind-input" name="keybind" placeholder="Press a key" readonly>
            </div>
        </div>
    </div>
    <script src="/app.js"></script>
    <script>
        function applyTheme(theme) {
            document.body.classList.remove('theme-dark', 'theme-light', 'theme-colorblind');
            document.body.classList.add(theme);
            localStorage.setItem('theme', theme);
        }

        window.onload = function () {
            const savedColor = localStorage.getItem('overlayColor') || '#00b140';
            document.getElementById('overlay-color').value = savedColor;

            const savedTheme = localStorage.getItem('theme') || 'theme-dark';
            applyTheme(savedTheme);

            const savedHostIP = localStorage.getItem('hostIP') || '';
            document.getElementById('host-ip').value = savedHostIP;
        };

        document.getElementById('overlay-color').addEventListener('input', function () {
            const selectedColor = this.value;
            localStorage.setItem('overlayColor', selectedColor);
        });

        document.getElementById('reset-color').addEventListener('click', function () {
            const defaultColor = '#00b140';
            localStorage.setItem('overlayColor', defaultColor);
            document.getElementById('overlay-color').value = defaultColor;
            const overlayElement = document.querySelector('.overlay');
            if (overlayElement) {
                overlayElement.style.backgroundColor = defaultColor;
            }
        });

        document.getElementById('host-ip').addEventListener('input', function () {
            const hostIP = this.value;
            localStorage.setItem('hostIP', hostIP);
        });

        document.getElementById('light-theme').onclick = function () {
            applyTheme('theme-light');
        };

        document.getElementById('dark-theme').onclick = function () {
            applyTheme('theme-dark');
        };

        document.getElementById('colorblind-theme').onclick = function () {
            applyTheme('theme-colorblind');
        };
        document.querySelector('.reset-button').addEventListener('click', function () {
        const confirmed = confirm('Are you sure you want to reset the scoreboard? This action cannot be undone.');
        if (confirmed) {
            console.log('Scoreboard reset confirmed.');
        } else {
            console.log('Canceled!');
        }
    });
    </script>

</body>

</html>